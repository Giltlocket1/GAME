@import url('https://fonts.googleapis.com/css2?family=Bangers&family=Roboto:wght@400;700&display=swap');
@import url('https://fonts.googleapis.com/css2?family=Press+Start+2P&display=swap'); /* ¡Añadido para el estilo retro/épico! */

/* --- CONFIGURACIÓN GLOBAL --- */
:root {
    --player1-color: #FF8C00; /* Naranja/Amarillo (Goku/Saiyajin) */
    --player2-color: #00BFFF; /* Azul/Cian (Rivales/Cool) */
    --hp-color: #DC143C; /* Rojo Carmesí */
    --ki-color: #007bff; /* Azul Eléctrico */
    --energy-color: #00c853; /* Verde Energía */
    
    /* Colores para el Historial V/D (Ajustados a tu tema) */
    --historial-border-color: #FFD700; /* Oro */
    --historial-bg: rgba(0, 0, 0, 0.95);
    --historial-v-color: #38c172; /* Verde Victoria */
    --historial-d-color: #e3342f; /* Rojo Derrota */
}

/* ------------------------------------------------------------------ */
/* --- FONDOS BASE Y DE BATALLA (CORREGIDO) --- */
/* ------------------------------------------------------------------ */

/* Fondo de Selección de Personajes (REEMPLAZA tu antiguo .dbz-bg) */
.dbz-bg-seleccion {
  background: radial-gradient(circle at top, rgba(255, 136, 0, 0.15), rgba(0, 0, 0, 0.9) 70%), 
              url('/dist/public/img/fondo/Fondo.jpeg') center center / cover no-repeat fixed;
  font-family: 'Roboto', sans-serif;
  color: #fff;
  min-height: 100vh;
  display: flex;
  justify-content: center;
  align-items: flex-start;
  overflow-y: auto;
  backdrop-filter: blur(2px);
  text-shadow: 1px 1px 3px rgba(0, 0, 0, 0.8);
}

/* Fondos de Batalla Aleatorios (AÑADIDOS) */
/* Estas son las clases que JavaScript aplicará aleatoriamente */
.dbz-bg-battle-1 {
    /* Ejemplo 1: Fondo Namek / Planeta */
    background: radial-gradient(circle at center, rgba(173, 216, 230, 0.2), rgba(0, 0, 0, 0.9) 80%), 
                url('/dist/public/img/fondo/fondo2.jpeg') center center / cover no-repeat fixed;
    /* Copiamos los estilos base */
    font-family: 'Roboto', sans-serif; color: #fff; min-height: 100vh; display: flex;
    justify-content: center; align-items: flex-start; overflow-y: auto;
    backdrop-filter: blur(3px); text-shadow: 1px 1px 3px rgba(0, 0, 0, 0.8);
}

.dbz-bg-battle-2 {
    /* Ejemplo 2: Fondo Ciudad / Noche */
    background: radial-gradient(circle at bottom, rgba(255, 69, 0, 0.3), rgba(0, 0, 0, 0.9) 70%), 
                url('/dist/public/img/fondo/fondo3.jpeg') center center / cover no-repeat fixed;
    font-family: 'Roboto', sans-serif; color: #fff; min-height: 100vh; display: flex;
    justify-content: center; align-items: flex-start; overflow-y: auto;
    backdrop-filter: blur(1px); text-shadow: 1px 1px 3px rgba(0, 0, 0, 0.8);
}

.dbz-bg-battle-3 {
    /* Ejemplo 3: Fondo Montañas / Terreno Destruido */
    background: radial-gradient(circle at top, rgba(138, 43, 226, 0.3), rgba(0, 0, 0, 0.9) 60%), 
                url('/dist/public/img/fondo/fondo4.jpeg') center center / cover no-repeat fixed;
    font-family: 'Roboto', sans-serif; color: #fff; min-height: 100vh; display: flex;
    justify-content: center; align-items: flex-start; overflow-y: auto;
    backdrop-filter: blur(4px); text-shadow: 1px 1px 3px rgba(0, 0, 0, 0.8);
}

.container {
  max-width: 1100px;
  padding: 1rem;
  margin-top: 1rem;
}

/* ------------------------------------------------------------------ */
/* --- TÍTULO Y SELECCIÓN --- */
/* ------------------------------------------------------------------ */
.dbz-title {
  font-family: 'Bangers', cursive;
  font-size: 3rem;
  color: #fff;
  text-shadow:
    0 0 10px #ffcc00,
    0 0 20px #ff9900,
    0 0 40px #ff3300;
  letter-spacing: 3px;
  animation: kiGlow 2s infinite alternate;
}

@keyframes kiGlow {
  from { text-shadow: 0 0 10px #ffcc00, 0 0 20px #ff9900; }
  to   { text-shadow: 0 0 25px #ff6600, 0 0 45px #ff3300; }
}

.dbz-card {
  background: rgba(0, 0, 0, 0.8);
  border: 2px solid transparent;
  border-image: linear-gradient(90deg, #ffcc00, #ff6600);
  border-image-slice: 1;
  border-radius: 10px;
  box-shadow: 0 0 20px rgba(255, 165, 0, 0.3);
  padding: 1rem;
  transition: transform 0.3s ease, box-shadow 0.3s ease;
}

.dbz-card:hover {
  transform: scale(1.02);
  box-shadow: 0 0 25px rgba(255, 200, 50, 0.7);
}

.form-control {
  background-color: rgba(255, 255, 255, 0.1);
  border: 1px solid #ffcc00;
  color: #fff;
  transition: 0.3s;
}

/* ------------------------------------------------------------------ */
/* --- PERSONAJES (EXISTENTE) --- */
/* ------------------------------------------------------------------ */
.dbz-btn {
  width: 50px;
  height: 50px;
  border-radius: 50%;
  border: 2px solid transparent;
  border-image: linear-gradient(45deg, #ff9900, #ff3300);
  border-image-slice: 1;
  background: rgba(255, 255, 255, 0.05);
  box-shadow: 0 0 8px rgba(255, 102, 0, 0.5);
  transition: all 0.2s ease-in-out;
}

.dbz-btn:hover {
  transform: scale(1.1);
  box-shadow: 0 0 15px rgba(255, 140, 0, 0.8);
}

.personaje-btn.selected {
  border: 4px solid var(--player1-color); 
  box-shadow: 0 0 20px var(--player1-color);
  transform: scale(1.15);
}

#jugador2 .personaje-btn.selected {
  border: 4px solid var(--player2-color); 
  box-shadow: 0 0 20px var(--player2-color);
}

/* ------------------------------------------------------------------ */
/* --- VENTANA DE PREVISUALIZACIÓN GRANDE (EXISTENTE) --- */
/* ------------------------------------------------------------------ */
.dbz-portrait-preview {
    display: none; 
    position: absolute; 
    width: 150px; 
    height: 200px;
    object-fit: cover; 
    border: 4px solid #FFD700;
    border-radius: 8px;
    box-shadow: 0 0 25px rgba(255, 160, 0, 0.9), inset 0 0 10px rgba(0, 0, 0, 0.5);
    z-index: 90;
    top: 50%; 
    transform: translateY(-50%);
    left: 10px;
}

#jugador2 .dbz-portrait-preview-right {
    left: auto;
    right: 10px;
}

/* --- BOTONES ACEPTAR (EXISTENTE) --- */
#btn_py1, #btn_py2 {
  background: linear-gradient(to bottom, #ffd500, #ff9800);
  color: #1a1a1a;
  font-weight: bold;
  border: none;
  transition: all 0.3s ease;
  border-radius: 6px;
}
/* Tu HTML usa `btn-warning` en vez de los IDs, pero mantendremos los IDs para el estilo específico de la paleta DBZ */
#btn_py1, #btn_py2:hover {
  background: linear-gradient(to bottom, #ff9800, #ffd500); /* Invertido para hover */
}


/* ------------------------------------------------------------------ */
/* --- ESTILO "¡HAY CABRÓN!" PARA BATALLA (EXISTENTE) --- */
/* ------------------------------------------------------------------ */

/* Tarjeta de Batalla - Más agresiva */
#batalla .col-md-5 {
    background: rgba(10, 0, 20, 0.95);
    border-radius: 15px;
    border: 3px solid transparent; 
    background-image: linear-gradient(rgba(10, 0, 20, 0.95), rgba(10, 0, 20, 0.95)), 
                      linear-gradient(90deg, #ff0000, #8A2BE2, #ff0000);
    background-origin: border-box;
    background-clip: padding-box, border-box;
    box-shadow: 
        0 0 20px rgba(255, 0, 0, 0.7),
        0 0 40px rgba(138, 43, 226, 0.5);
    transition: all 0.3s ease;
}

/* Efecto hover más fuerte para la batalla */
#batalla .col-md-5:hover {
    transform: scale(1.01);
    box-shadow: 
        0 0 30px rgba(255, 0, 0, 0.9), 
        0 0 50px rgba(138, 43, 226, 0.7);
}

/* Nombres de Personaje y Usuario en Batalla */
/* Se ajusta el tamaño del nombre de personaje para que quepa mejor en tu HTML de batalla */
#nombre_personaje1, #nombre_personaje2 {
    font-family: 'Bangers', cursive;
    font-size: 1.8rem; /* Ajustado de 2rem a 1.8rem */
    letter-spacing: 2px;
    text-shadow: 0 0 10px #fff;
}
#username1, #username2 {
    font-family: 'Press Start 2P', cursive;
    font-size: 0.7rem;
    color: #ffd700;
}

/* Divisor en Batalla */
#batalla hr {
    height: 2px;
    box-shadow: 0 0 8px;
    margin: 10px auto;
}
#batalla #jugador1 hr { box-shadow: 0 0 8px var(--player1-color); }
#batalla #jugador2 hr { box-shadow: 0 0 8px var(--player2-color); }

/* Etiquetas de Stats (Vida/Ki/Energía) */
#batalla .w-75 p {
    font-family: 'Press Start 2P', cursive;
    font-size: 0.7rem;
    letter-spacing: 1px;
    margin-bottom: 2px !important;
}
#batalla .w-75 .text-success { color: var(--hp-color) !important; text-shadow: 0 0 5px var(--hp-color); }
#batalla .w-75 .text-primary { color: var(--ki-color) !important; text-shadow: 0 0 5px var(--ki-color); }
#batalla .w-75 .text-info { color: var(--energy-color) !important; text-shadow: 0 0 5px var(--energy-color); }

/* BARRAS DE ESTADO - Más Impactantes y con Números */
.progress {
    height: 18px !important;
    background: rgba(255, 255, 255, 0.1);
    border-radius: 6px;
    box-shadow: inset 0 0 8px rgba(0, 0, 0, 0.7);
}

.progress-bar {
    transition: width 0.5s ease-out;
    font-weight: bold; 
    font-size: 0.8rem;
    text-shadow: 1px 1px 2px #000;
    text-align: center;
    box-shadow: inset 0 0 8px rgba(255, 255, 255, 0.3);
}

/* Asignación de colores (usando tus clases originales) */
.bg-success { background-color: var(--hp-color) !important; }
.bg-primary { background-color: var(--ki-color) !important; }
.bg-info { background-color: var(--energy-color) !important; }

/* Efecto de rayado y animación (EXISTENTE) */
#batalla .progress-bar-striped {
    background-image: linear-gradient(
        45deg, 
        rgba(255, 255, 255, 0.15) 25%, 
        transparent 25%, 
        transparent 50%, 
        rgba(255, 255, 255, 0.15) 50%, 
        rgba(255, 255, 255, 0.15) 75%, 
        transparent 75%, 
        transparent
    );
    background-size: 1rem 1rem;
}
#batalla .progress-bar-animated {
    animation: progress-bar-stripes 1s linear infinite;
}

/* Imágenes en Batalla - Efecto flotante (EXISTENTE) */
#img_personaje1, #img_personaje2 {
    max-height: 200px;
    filter: drop-shadow(0 0 15px rgba(255, 255, 255, 0.8));
    animation: floatingImage 3s infinite ease-in-out; 
}
@keyframes floatingImage {
    0% { transform: translateY(0px); }
    50% { transform: translateY(-10px); }
    100% { transform: translateY(0px); }
}

/* --- VS - ¡Más Dinámico! (EXISTENTE) --- */
#batalla .display-6 {
  font-family: 'Bangers', cursive;
  font-size: 4rem;
  color: #FFD700;
  text-shadow: 0 0 15px red, 0 0 25px orange, 0 0 35px yellow;
  transform: rotate(-10deg);
  animation: vsFlash 1.5s infinite alternate;
}
/* Define @keyframes vsFlash si no está definido */
@keyframes vsFlash {
  from { opacity: 1; }
  to { opacity: 0.7; transform: rotate(-8deg) scale(1.05); }
}


/* --- BOTONES DE BATALLA (EXISTENTE) --- */
/* Se ajustan un poco las acciones para el tamaño .btn-sm de tu HTML */
.dbz-action-btn {
  font-family: 'Press Start 2P', cursive;
  font-size: 0.55rem !important; /* Ligeramente más pequeño para el sm */
  padding: 6px 4px !important;
  border-radius: 6px;
  color: #fff;
  transition: all 0.2s;
  border: 1px solid rgba(255, 255, 255, 0.2);
  box-shadow: 0 4px 10px rgba(0, 0, 0, 0.6);
}

/* Colores de acción (EXISTENTE) */
#btn_atk_basico1, #btn_atk_basico2 {
  background: linear-gradient(to bottom, #ff9800, #c27b00);
  border-color: #ffd500;
}
#btn_atk_especial1, #btn_atk_especial2 {
  background: linear-gradient(to bottom, #00BFFF, #1E90FF);
  border-color: #87CEEB;
}
#btn_cargar_ki1, #btn_cargar_ki2, #btn_semilla1, #btn_semilla2 {
  background: linear-gradient(to bottom, #00c853, #007e33);
  border-color: #90EE90;
}


/* ========================================================= */
/* === ESTILOS DE HISTORIAL Y ALERTA ======================= */
/* ========================================================= */

/* --- Historial de Combate (V/D) --- */

.dbz-historial-card {
    background: var(--historial-bg);
    border: 3px solid var(--historial-border-color); /* Borde Oro */
    border-radius: 10px;
    box-shadow: 0 0 15px rgba(255, 215, 0, 0.6); /* Sombra Oro */
    color: #fff;
    padding: 15px;
}
/* Ajuste de padding para la versión compacta de tu HTML */
#historial_vd .dbz-historial-card {
    padding: 8px 15px !important; 
}

.dbz-historial-title {
    font-family: 'Press Start 2P', cursive;
    font-size: 1rem !important; /* Ajustado de 1.2rem a 1rem */
    color: var(--historial-border-color);
    text-shadow: 1px 1px 0 #333;
    border-bottom: 2px solid rgba(255, 215, 0, 0.5);
    padding-bottom: 5px;
    margin-bottom: 5px !important; /* Ajustado de 10px a 5px */
}

.historial-jugador-entry {
    display: flex;
    justify-content: space-between;
    align-items: center;
    background: rgba(255, 255, 255, 0.05);
    padding: 5px 10px;
    margin-bottom: 5px;
    border-radius: 5px;
    border-left: 3px solid var(--historial-border-color);
    transition: background 0.3s ease, transform 0.1s ease;
}

.historial-jugador-entry:hover {
    background: rgba(255, 215, 0, 0.1);
    transform: translateX(3px);
}

.historial-jugador-entry h4 {
    font-family: 'Roboto', sans-serif;
    font-size: 0.9rem !important; /* Ligeramente más pequeño */
    font-weight: bold;
    margin: 0;
}

.historial-jugador-stats span {
    font-weight: bold;
    margin-left: 10px;
    padding: 3px 6px;
    border-radius: 3px;
    font-size: 0.7rem !important; /* Ligeramente más pequeño */
    font-family: 'Press Start 2P', cursive;
}

.historial-victorias {
    color: var(--historial-v-color);
    background: rgba(56, 193, 114, 0.2);
}

.historial-derrotas {
    color: var(--historial-d-color);
    background: rgba(227, 52, 47, 0.2);
}

/* --- Estilos para la Alerta de Ataque (SweetAlert) --- */

/* Contenedor principal de la alerta de ataque */
.dbz-action-card {
    border: 5px solid #ffcc00 !important; /* Borde amarillo brillante */
    background-color: rgba(10, 0, 20, 0.95) !important; /* Fondo morado oscuro de batalla */
    box-shadow: 0 0 20px rgba(255, 165, 0, 0.8), inset 0 0 10px rgba(138, 43, 226, 0.5) !important;
    border-radius: 15px !important;
}

.dbz-action-title {
    font-family: 'Bangers', cursive !important;
    color: #fff !important;
    text-shadow: 3px 3px 0 #ff0000; /* Sombra de texto rojo intenso */
    font-size: 2rem !important;
    font-weight: bold !important;
    letter-spacing: 2px;
}

.dbz-action-timer {
    font-family: 'Press Start 2P', cursive;
    color: #ffd700;
    font-size: 1rem;
    font-weight: bold;
}

/* ========================================================= */
/* === ESTILOS ESPECÍFICOS: BOTÓN BORRAR HISTORIAL ========= */
/* ========================================================= */

#btn_borrar_historial {
    /* Utiliza la clase base de los botones de acción para la fuente */
    /* Sobreescribe para darle el estilo de "peligro" */
    font-family: 'Press Start 2P', cursive;
    font-size: 0.65rem !important; 
    padding: 5px 10px !important;
    border-radius: 5px !important;
    
    /* Colores de destrucción/peligro */
    background: linear-gradient(to bottom, #FF0000, #8B0000) !important; /* Rojo Intenso */
    color: #fff !important;
    border: 2px solid #FFD700 !important; /* Borde de contraste (Oro) */
    box-shadow: 0 0 10px rgba(255, 0, 0, 0.7) !important; /* Sombra de fuego */
    letter-spacing: 1px;
    transition: all 0.2s ease;
    
    /* Asegura que se vea bien en la fila flexible del historial */
    margin-left: 10px; 
}

#btn_borrar_historial:hover:not(:disabled) {
    background: linear-gradient(to bottom, #FF4500, #C53D00) !important; /* Rojo más brillante al pasar el ratón */
    transform: scale(1.05);
    box-shadow: 0 0 15px rgba(255, 69, 0, 0.9) !important;
}

#btn_borrar_historial:disabled {
    opacity: 0.5;
    cursor: not-allowed;
    background: #444 !important; /* Gris oscuro cuando está deshabilitado */
    border-color: #777 !important;
    box-shadow: none !important;
}